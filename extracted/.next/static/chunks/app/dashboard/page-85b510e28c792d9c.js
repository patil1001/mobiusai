(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{242:function(e,s,l){Promise.resolve().then(l.bind(l,1570))},1570:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return u}});var t=l(7437),r=l(2265);function a(){let[e,s]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=localStorage.getItem("mobius.chats");e&&s(JSON.parse(e))},[]),(0,t.jsxs)("aside",{className:"h-full border-r border-white/10 p-2 flex flex-col",children:[(0,t.jsx)("button",{onClick:()=>{let l=[{id:crypto.randomUUID(),title:"New chat"},...e];s(l),localStorage.setItem("mobius.chats",JSON.stringify(l))},className:"mb-2 h-10 rounded-md bg-primary text-black font-semibold",children:"New"}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto space-y-1",children:e.map(e=>(0,t.jsx)("div",{className:"px-3 py-2 rounded-md hover:bg-white/5 cursor-pointer border border-white/10",children:e.title},e.id))})]})}let i=[{key:"chat",label:"chat"},{key:"spec",label:"spec"},{key:"code",label:"code"},{key:"draft",label:"draft"},{key:"live",label:"live"}];function c(e){let{active:s,onToggle:l}=e;return(0,t.jsxs)("header",{className:"flex items-center justify-between px-3 h-14 border-b border-white/10",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Waiting for name..."}),(0,t.jsx)("nav",{className:"flex items-center gap-2 text-sm",children:i.map(e=>(0,t.jsx)("button",{onClick:()=>l(e.key),className:"px-3 py-1.5 rounded-md border ".concat(s.includes(e.key)?"bg-primary text-black border-transparent":"border-white/15 opacity-80 hover:opacity-100"),children:e.label},e.key))})]})}function d(){let[e,s]=(0,r.useState)([]),[l,a]=(0,r.useState)(""),[i,c]=(0,r.useState)(),d=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("mobius.messages");e&&s(JSON.parse(e))},[]),(0,r.useEffect)(()=>{var s;null===(s=d.current)||void 0===s||s.scrollTo({top:d.current.scrollHeight}),localStorage.setItem("mobius.messages",JSON.stringify(e))},[e]);let n=async()=>{if(!l.trim()&&!i)return;let t={id:crypto.randomUUID(),role:"user",content:l,imageUrl:i};s(e=>[...e,t]),a(""),c(void 0);let r=await fetch("/api/chat",{method:"POST",body:JSON.stringify({messages:[...e,t]})}),d=await r.json(),n={id:crypto.randomUUID(),role:"assistant",content:d.reply};s(e=>[...e,n])},o=async e=>{c(URL.createObjectURL(e))};return(0,t.jsxs)("div",{className:"h-full flex flex-col",children:[(0,t.jsx)("div",{ref:d,className:"flex-1 overflow-y-auto p-4 space-y-4",children:e.map(e=>(0,t.jsx)("div",{className:"max-w-3xl ".concat("user"===e.role?"ml-auto":""),children:(0,t.jsxs)("div",{className:"px-4 py-3 rounded-xl ".concat("user"===e.role?"bg-primary text-black":"bg-white/5"),children:[(0,t.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),e.imageUrl&&(0,t.jsx)("img",{src:e.imageUrl,alt:"upload",className:"mt-2 rounded-lg max-h-64"})]})},e.id))}),(0,t.jsxs)("div",{className:"p-3 border-t border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("label",{className:"cursor-pointer px-3 h-11 rounded-md border border-white/15 grid place-items-center",children:["+",(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{var s;let l=null===(s=e.target.files)||void 0===s?void 0:s[0];l&&o(l)}})]}),(0,t.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:"Enter instruction or question...",className:"flex-1 h-11 px-4 rounded-md bg-black/40 border border-white/10 outline-none"}),(0,t.jsx)("button",{onClick:n,className:"h-11 px-4 rounded-md bg-primary text-black font-semibold",children:"â†‘"})]}),i&&(0,t.jsx)("div",{className:"mt-2 text-sm opacity-70",children:"Image attached"})]})]})}function n(){return(0,t.jsxs)("div",{className:"h-full p-4 overflow-y-auto",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"spec"}),(0,t.jsx)("p",{className:"mt-2 text-white/70",children:"A structured plan will appear here: overview, auth, features, data, and operations."})]})}function o(){return(0,t.jsxs)("div",{className:"h-full p-4 overflow-y-auto",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"code"}),(0,t.jsx)("p",{className:"mt-2 text-white/70",children:"Generated files and diffs will show here."})]})}function m(){return(0,t.jsxs)("div",{className:"h-full p-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"draft"}),(0,t.jsx)("div",{className:"mt-3 h-[70vh] rounded-lg border border-white/10 grid place-items-center text-white/60",children:"Draft deploy preview"})]})}function h(){return(0,t.jsxs)("div",{className:"h-full p-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"live"}),(0,t.jsx)("div",{className:"mt-3 h-[70vh] rounded-lg border border-white/10 grid place-items-center text-white/60",children:"Live app preview"})]})}function u(){let[e,s]=(0,r.useState)(["chat"]);return(0,t.jsxs)("main",{className:"h-screen w-full grid",style:{gridTemplateColumns:"280px 1fr"},children:[(0,t.jsx)(a,{}),(0,t.jsxs)("section",{className:"h-full flex flex-col",children:[(0,t.jsx)(c,{active:e,onToggle:e=>{s(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])}}),(0,t.jsxs)("div",{className:"flex-1 grid gap-2 p-2",style:{gridTemplateColumns:"repeat(".concat(e.length||1,", minmax(0,1fr))")},children:[e.includes("chat")&&(0,t.jsx)("div",{className:"glass rounded-lg overflow-hidden",children:(0,t.jsx)(d,{})}),e.includes("spec")&&(0,t.jsx)("div",{className:"glass rounded-lg overflow-hidden",children:(0,t.jsx)(n,{})}),e.includes("code")&&(0,t.jsx)("div",{className:"glass rounded-lg overflow-hidden",children:(0,t.jsx)(o,{})}),e.includes("draft")&&(0,t.jsx)("div",{className:"glass rounded-lg overflow-hidden",children:(0,t.jsx)(m,{})}),e.includes("live")&&(0,t.jsx)("div",{className:"glass rounded-lg overflow-hidden",children:(0,t.jsx)(h,{})})]})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=242)}),_N_E=e.O()}]);